"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[962],{3982:function(e,r,s){s.d(r,{Z:function(){return u}});var t=function(){var e=this,r=e._self._c;return r("el-form-item",{attrs:{id:"password",prop:"password",rules:[{validator:e.validatePassword,trigger:"change"}]}},[r("el-input",{attrs:{type:"password",placeholder:e.placeholder},on:{input:e.enterInput},model:{value:e.password,callback:function(r){e.password=r},expression:"password"}})],1)},o=[],n=s(9176),a={name:"Password",components:{},props:{placeholder:{type:String,default:"密码"},passwordConfirm:{type:String,default:""}},data(){return{password:""}},methods:{validatePassword(e,r,s){return this.password&&""!=this.password?(0,n.bX)(this.password)?this.passwordConfirm&&this.password!=this.passwordConfirm?s(new Error("两次密码不一致")):void s():s(new Error("密码为6~20的英文和数字组合")):s(new Error("密码不能为空"))},enterInput(){const e=(0,n.bX)(this.password);let r=e?this.password:"";this.$emit("update:value",r)}},watch:{passwordConfirm:{handler(e,r){if(e==this.password){const e=document.getElementById("password").querySelector(".el-form-item__error");e&&(e.style.display="none")}}}}},i=a,d=s(1001),l=(0,d.Z)(i,t,o,!1,null,"7ace55bc",null),u=l.exports},542:function(e,r,s){s.d(r,{Z:function(){return u}});var t=function(){var e=this,r=e._self._c;return r("el-form-item",{attrs:{id:"passwordConfirm",prop:"passwordConfirm",rules:[{validator:e.validatePassword,trigger:"change"}]}},[r("el-input",{attrs:{type:"password",placeholder:e.placeholder},on:{input:e.enterInput},model:{value:e.passwordConfirm,callback:function(r){e.passwordConfirm=r},expression:"passwordConfirm"}})],1)},o=[],n=s(9176),a={name:"Password",components:{},props:{placeholder:{type:String,default:"确认密码"},password:{type:String,default:""}},data(){return{passwordConfirm:""}},methods:{validatePassword(e,r,s){return this.passwordConfirm&&""!=this.passwordConfirm?(0,n.bX)(this.passwordConfirm)?this.password&&this.passwordConfirm!=this.password?s(new Error("两次密码不一致")):void s():s(new Error("密码为6~20的英文和数字组合")):s(new Error("密码不能为空"))},enterInput(){const e=(0,n.bX)(this.passwordConfirm);let r=e?this.passwordConfirm:"";this.$emit("update:value",r)}},watch:{password:{handler(e,r){if(e==this.passwordConfirm){const e=document.getElementById("passwordConfirm").querySelector(".el-form-item__error");e&&(e.style.display="none")}}}}},i=a,d=s(1001),l=(0,d.Z)(i,t,o,!1,null,"0de457b8",null),u=l.exports},2174:function(e,r,s){s.d(r,{Z:function(){return u}});var t=function(){var e=this,r=e._self._c;return r("el-form-item",{attrs:{prop:"username",rules:[{validator:e.validateUsername,trigger:"change"}]}},[r("el-input",{attrs:{placeholder:e.placeholder,minlength:"6",maxlength:"11"},on:{input:e.enterInput},model:{value:e.username,callback:function(r){e.username=r},expression:"username"}})],1)},o=[],n=s(9176),a={name:"Username",components:{},props:{placeholder:{type:String,default:"手机号"}},data(){return{username:""}},methods:{validateUsername(e,r,s){return this.username&&""!=this.username?(0,n.BG)(this.username)?void s():s(new Error("手机号格式不正确")):s(new Error("手机号不能为空"))},enterInput(){const e=(0,n.BG)(this.username);let r=e?this.username:"";this.$emit("update:value",r)}}},i=a,d=s(1001),l=(0,d.Z)(i,t,o,!1,null,"1841391e",null),u=l.exports},4129:function(e,r,s){s.d(r,{Z:function(){return u}});var t=function(){var e=this,r=e._self._c;return r("el-form-item",{attrs:{prop:"code",rules:e.rules}},[r("el-button",{staticClass:"button-vcode",attrs:{loading:e.loading,disabled:e.disabled},on:{click:e.handlerCode}},[e._v(e._s(e.button_text))]),r("el-input",{attrs:{placeholder:"验证码"},on:{input:e.enterInput},model:{value:e.code,callback:function(r){e.code=r},expression:"code"}})],1)},o=[],n=s(2257),a={name:"Code",components:{},props:{username:{type:String,default:""}},data(){return{disabled:!0,button_text:"获取验证码",loading:!1,code:"",timer:null,rules:[{required:!0,message:"验证不能为空",trigger:"blur"},{min:6,max:6,message:"请输入6位字符的验证码",trigger:"change"}]}},methods:{enterInput(){this.$emit("update:value",this.code)},handlerCode(){const e={username:this.username,module:"register"};this.loading=!0,(0,n.EO)(e).then((e=>{console.log("getCode",e),this.$message({type:"success",message:e.message}),this.loading=!1,this.countDown()})).catch((e=>{this.loading=!1}))},countDown(){let e=60;this.button_text=`倒计时${e}秒`,this.disabled=!0,this.timer=setInterval((()=>{e--,this.button_text=`倒计时${e}秒`,0===e&&(this.button_text="重新获取",this.disabled=!1,clearInterval(this.timer))}),1e3)}},watch:{username:{handler(e,r){this.disabled=!e}}}},i=a,d=s(1001),l=(0,d.Z)(i,t,o,!1,null,"152da394",null),u=l.exports},1962:function(e,r,s){s.r(r),s.d(r,{default:function(){return w}});var t=function(){var e=this,r=e._self._c;return r("div",{staticClass:"user-container"},[r("Back",{scopedSlots:e._u([{key:"navHeaderRight",fn:function(){return[r("router-link",{staticClass:"color-white opacity-4",attrs:{to:"/login"}},[e._v("登录")])]},proxy:!0}])}),r("div",{staticClass:"cars-form-ui"},[r("el-form",{ref:"form",attrs:{model:e.form}},[r("Username",{attrs:{value:e.form.username},on:{"update:value":function(r){return e.$set(e.form,"username",r)}}}),r("PasswordVue",{attrs:{passwordConfirm:e.form.passwordConfirm,value:e.form.password},on:{"update:value":function(r){return e.$set(e.form,"password",r)}}}),r("PasswordConfirm",{attrs:{password:e.form.password,value:e.form.passwordConfirm},on:{"update:value":function(r){return e.$set(e.form,"passwordConfirm",r)}}}),r("Code",{attrs:{username:e.form.username,value:e.form.code},on:{"update:value":function(r){return e.$set(e.form,"code",r)}}}),r("el-form-item",[r("el-button",{staticClass:"button-black",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")])],1)],1)],1)],1)},o=[],n=(s(7658),s(2174)),a=s(3982),i=s(542),d=s(4129),l=s(2257),u=s(3810),m=s.n(u),p={name:"Password",components:{Username:n.Z,Code:d.Z,PasswordVue:a.Z,PasswordConfirm:i.Z},data(){return{form:{desc:"",username:"",password:"",passwordConfirm:"",code:""}}},methods:{onSubmit(){console.log("submit!"),this.$refs["form"].validate((e=>{if(!e)return console.log("error submit!!"),!1;this.forgetPassword()})),console.log(this.form)},forgetPassword(){const e={username:this.form.username,password:m()(this.form.password),code:this.form.code};(0,l.u5)(e).then((e=>{this.$message({type:"success",message:e.message}),this.$router.push({name:"Login"})}))}}},c=p,f=s(1001),h=(0,f.Z)(c,t,o,!1,null,null,null),w=h.exports}}]);